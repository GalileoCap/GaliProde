import{R as e,M as t,C as n,S as a,I as o,L as r,r as l,l as i,a as c,b as s,u,H as m,B as p,c as y,F as d,W as E,d as f,e as b}from"./vendor.6165abad.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();function v(){return e.createElement(t,{fixed:"top",inverted:!0},e.createElement(n,null,e.createElement(t.Item,{as:"a",header:!0,href:"/"},"GaliProde"),e.createElement(t.Item,{as:"a",href:"/current"},"Current Games")))}function g(){return e.createElement(a,{inverted:!0,vertical:!0,style:{marginTop:"1em"}},e.createElement(n,{textAlign:"center"},e.createElement(o,{centered:!0,size:"mini",src:"/logo.png"}),e.createElement(r,{horizontal:!0,inverted:!0,divided:!0,link:!0,size:"small"},e.createElement(r.Item,{as:"a",href:"#"},"Site Map"),e.createElement(r.Item,{as:"a",href:"#"},"Contact Us"),e.createElement(r.Item,{as:"a",href:"#"},"Terms and Conditions"),e.createElement(r.Item,{as:"a",href:"#"},"Privacy Policy"))))}async function h(e,t=""){const n={},a=Object.entries(e).map((async([e,a])=>{n[e]="buscando";try{n[e]=await a()}catch(o){console.error(t+" conseguirVarios error consiguiendo",e,o),n[e]="fallo"}return n[e]}));return await Promise.all(a),console.log(t+" conseguirVarios",n),n}var T=[{inputs:[{internalType:"uint256",name:"TotalGames",type:"uint256"},{internalType:"uint256",name:"price",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"Chairperson",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"Done",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"GamePool",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"Games",outputs:[{internalType:"uint256",name:"result",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"MinPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"Started",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"TotalPool",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256[]",name:"votes",type:"uint256[]"}],name:"placeBet",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"startGames",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"results",type:"uint256[]"}],name:"inputResults",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimPrize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getBettor",outputs:[{components:[{internalType:"uint256[]",name:"votes",type:"uint256[]"},{internalType:"bool",name:"voted",type:"bool"},{internalType:"bool",name:"extracted",type:"bool"}],internalType:"struct Wager.Bettor",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"i",type:"uint256"}],name:"getGame",outputs:[{components:[{internalType:"uint256[3]",name:"votes",type:"uint256[3]"},{internalType:"uint256",name:"result",type:"uint256"}],internalType:"struct Wager.Game",name:"",type:"tuple"}],stateMutability:"view",type:"function"}];const w="0x8F65379DA5db5ADacA039601EDc41fA70337172c",I=[{local:"Kazakhstan",away:"Ukraine",info:{date:"2021-09-01T11"}},{local:"Malta",away:"Cyprus",info:{date:"2021-09-01T15:45"}},{local:"Faroe Islands",away:"Israel",info:{date:"2021-09-01T15:45"}},{local:"Moldova",away:"Austria",info:{date:"2021-09-01T15:45"}}];window.Web3U=i;const C=new c({supportedChainIds:[1,3,4,5,42,97,1337]});function x(e,t=w){return new s(t,T,e.getSigner())}function M(e,t=w){x(e).claimPrize().then((e=>console.log("claimPrize DONE"))).catch((e=>console.error("claimPrize",t,e)))}function S(e,t,n=w){const a=x(t,n);return"bettor"==e[0]?a.getBettor():"started"==e[0]?a.Started():"done"==e[0]?a.Done():"game"==e[0]?a.getGame(e[1]):"price"==e[0]?a.MinPrice():"totalPool"==e[0]?a.TotalPool():void console.error("getFromContract invalid arguments",e)}function k({game:t,y:n,chosenSide:o,onChooseTeam:c}){const{chainId:s,account:m,activate:y,active:E,library:f}=u(),[b,v]=l.exports.useState(!1),[g,T]=l.exports.useState({votes:[0,0,0]}),w=a=>{const r=0==a?t.local:t.away,l=e.createElement("div",null,e.createElement(d,{name:r.toLowerCase()}),r),i=a==o?"green":"red";return-1!=o?e.createElement(p,{color:i,onClick:()=>c(n,a),content:l}):e.createElement(p,{onClick:()=>c(n,a),content:l})};l.exports.useEffect((()=>(async()=>{const e={votes:async()=>(await S(["game",n],f)).votes},t=await h(e,"game updateData");T(t),console.log("game updateData done",t)})()),[b]);return e.createElement(a,null,e.createElement(r,null,e.createElement(r.Item,null,e.createElement(r,{horizontal:!0},e.createElement(r.Item,null,e.createElement(p.Group,{size:"big"},w(0),e.createElement(p.Or,{text:"vs."}),w(1))),e.createElement(r.Item,null,2==o?e.createElement(p,{color:"grey",onClick:()=>c(n,2),content:"Tie"}):e.createElement(p,{onClick:()=>c(n,2),content:"Tie"})),e.createElement(p,{size:"small",onClick:()=>{v(!b)},content:"Show Info"}),e.createElement(r.Item,null))),(()=>{if(b){const n=t.info.date;return e.createElement(r.Item,null,e.createElement(r,{horizontal:!0},e.createElement(r.Item,null,"Date: ",n),e.createElement(r.Item,null,"Local Votes: ",i.hexToNumber(g.votes[0]._hex)),e.createElement(r.Item,null,"Away Votes: ",i.hexToNumber(g.votes[1]._hex)),e.createElement(r.Item,null,"Tie Votes: ",i.hexToNumber(g.votes[2]._hex))))}})()))}function P({bets:t}){return e.createElement("div",{className:"content"},e.createElement(r,null,I.map(((n,a)=>e.createElement(r.Item,{key:a},e.createElement(r.Header,null,n.local," vs. ",n.away),e.createElement(r.Description,null,0==t[a]?n.local:1==t[a]?n.away:"Tie"))))))}function z(){const{chainId:t,account:a,activate:o,active:r,library:i}=u(),[c,s]=l.exports.useState(Array(I.length).fill(-1)),d=function(){const[e,t]=l.exports.useState(0);return()=>t((e=>e+1))}(),E=(e,t)=>{console.log("Chose game side bets",e,t,c);const n=c;n[e]=t,s(n),d()},[f,b]=l.exports.useState(!1);return e.createElement(n,null,e.createElement(m,{as:"h1"},"Pick your winners"),e.createElement(n,null,I.map(((t,n)=>e.createElement(k,{key:n,game:t,y:n,chosenSide:c[n],onChooseTeam:E})))),e.createElement(p,{primary:!0,onClick:()=>{console.log("onSubmitBets bets",c),!function(e){let t=!0;for(const n of e)t&=0<=n&&n<=2;return t}(c)?console.log("onSubmitBets invalid bets"):(console.log("onSubmitBets valid bets"),b(!0))},content:"Submit",style:{marginTop:"1.5em"}}),e.createElement(y,{open:f,onConfirm:()=>function(e,t,n=w){const a=x(t);S(["price"],t,n).then((t=>{a.placeBet(e,{value:t}).then((e=>console.log("submitBets DONE"))).catch((e=>console.error("submitBets",n,e)))}))}(c,i),onCancel:()=>{console.log("onClickCancel"),b(!1)},header:"Are you sure?",content:e.createElement(P,{bets:c})}))}function D({bettor:t,started:a,done:o}){return e.createElement(n,null,e.createElement(n,null,e.createElement(m,{as:"h1"},"Info"),(()=>{const n="Claim Prize";return!o||t.extracted?e.createElement(p,{secondary:!0,disabled:!0,content:n}):e.createElement(p,{primary:!0,onClick:M,content:n})})()))}function A(){const{chainId:t,account:a,activate:o,active:r,library:i}=u(),[c,s]=l.exports.useState({bettor:void 0,started:!1,done:!1});return l.exports.useEffect((()=>{(async()=>{const e={bettor:async()=>await S(["bettor"],i),started:async()=>await S(["started"],i),done:async()=>await S(["done"],i)},t=await h(e,"bettor updateData");s(t),console.log("bettor updateData done",t)})()}),[a]),null==c.bettor?e.createElement(n,null):c.bettor.voted||c.started||c.done?e.createElement(D,{bettor:c.bettor}):e.createElement(z,null)}function B(){const{chainId:t,account:a,activate:o,active:r,library:l}=u();return e.createElement("div",null,e.createElement(v,null),e.createElement(n,{text:!0,style:{marginTop:"4em"}},r?e.createElement(A,null):e.createElement("div",null,e.createElement("h1",null,"Wallet activation required"),e.createElement(p,{primary:!0,onClick:()=>{o(C)},content:"Activate"}))),e.createElement(g,null))}function G(){return e.createElement("div",{style:{textAlign:"center"}},e.createElement(E,{getLibrary:e=>{const t=new f(e);return t.pollingInterval=12e3,t}},e.createElement(B,null)))}b.render(e.createElement(G,null),document.getElementById("root"));
